<html>
  <aw:include path="/templates/head.xml" setcon.title="nContains filter explaination" />
  <body>
    <aw:include path="../header.xml" setcon.heading="Explaination of filter" />
            <div class="content">
      <section class="main-content">
        <h2>Explaination of filter</h2>
        <nav  class="breadcrumbs">
          <ul>
	    <li><a href="/templates/En/">Home</a></li>
            <li><span>&#8250;</span></li>
            <li><a href="/templates/En/docs.html">Docs</a></li>
            <li><span>&#8250;</span></li>
            <li><a href="/templates/En/groovy/">Groovy</a></li>
          </ul>
        </nav>
    <p>
      <code>Filters</code> are generally used in association with sequence commands. Filters work as a
      post-processor to the returned value from associated sequence command before returning the
      result to the caller. For example,they are used in aw:loop element to apply constraints on
      the result returned from the associated sequence command. Here is the explanation of nContains
      filter to describe the usage of filters in AW5. This <a href="../templates/loop/filters/nContains.html">
      example</a> explains the usage of nContains filter with properties command. Filters work
      in the context of a loop. The loop will skip over any entry in the generated sequence if the filter
      adds a value named ignore to the context map for that entry. For examples of few filters implemented
      in AW5, please refer to this <a href="/templates/En/templates/loop/filters/">link</a> page.
    </p>
    <p>
      The <code>nContains</code> filter adds a value named ignore to the context map for any entry which contains
      value set in text.
    </p>
    <p>
      Listing of code with line numbers:
    </p>
    <pre>
      1. def loopPrefix = context.get("loopPrefix")
      2. if (!loopPrefix.equals(""))
      3.    loopPrefix += "."
      4. def key = context.get(loopPrefix + "key")
      5. def text = context.get(loopPrefix + "text")
      6. if (key.contains(text))
      7.    context.setVar(loopPrefix + "ignore", "true")
    </pre>
    <p>
      Detailed explaination how the script works:
    </p>
    <ul class="listtypenone">
    <li><b>1.</b><code> def loopPrefix = context.get("loopPrefix")</code>
    <p>
      Get the value of loopPrefix from the <a href="/templates/En/api/context.html">
      context</a> map. In this <a href="/templates/En/templates/loop/filters/nContains.html">
      example</a>, properties command is invoked with loopPrefix value as "pdump".
    </p></li>

    <li><b>2.</b><code> if (!loopPrefix.equals(""))</code>
    	<ul class="listtypenone">
    		<li><b>3.</b><code> loopPrefix += "." </code>
   	 			<p>If loopPrefix is not empty, append it with ".".</p></li></ul>
   	 			</li>

    <li><b>4.</b><code> def key = context.get(loopPrefix + "key")</code>
    <p>
      Get the key from the context map. In this
      <a href="/templates/En/templates/loop/filters/nContains.html">example</a> we are using "pdump"
      as prefix so keys would be of form "pdump.key".
    </p></li>
    <li><b>5.</b><code> def text = context.get(loopPrefix + "text")</code>
    <p>
      Get value of text from context map. This is the parameter passed to the nContains filter.
    </p></li>

    <li><b>6.</b><code> if (key.contains(text))</code>
    	<ul class="listtypenone">	
    		<li><b>7.</b><code> context.setVar(loopPrefix + "ignore", "true")</code>
    <p>
      If key contains text then, set the value named ignore to the context map for that key. The name
      of these variables will vary, depending on the value of the loopPrefix parameter. In current
      <a href="/templates/En/templates/loop/filters/nContains.html">example</a> value of text is ".".
      So all keys which contains ".", will be ignored.
    </p></li></ul>
    </li></ul>
              </section>
    </div>
    <aw:include path="../footer.xml" aw:setcon.template="currentRequest"/>
  </body>
</html>